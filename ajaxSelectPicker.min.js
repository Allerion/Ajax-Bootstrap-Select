/*!
 * ajax-bootstrap-select v1.0.5
 * https://github.com/truckingsim/Ajax-Bootstrap-Select
 *
 * @author Adam Heim originally for CROSCON
 * @copyright 2014 ajax-bootstrap-select
 * @license Licensed under the MIT license
 * @version 1.0.5
 */
!function(e,t){e.ajaxSelectPicker=function(n,r){var i={9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down",229:"unknown"};var s={ajaxResultsPreHook:null,ajaxSearchUrl:null,ajaxOptions:{},placeHolderOption:null,debug:false};var o=this,u=e(n);var a={destroyLi:function(){this.$menu.find("li").remove()}};e.extend(o,a);o.ajaxOptions=e.extend(s,r,{});o.init=function(){if(u.attr("data-search-url"))o.ajaxOptions.ajaxSearchUrl=u.attr("data-search-url");if(!u.data().hasOwnProperty("selectpicker")){this.log("ajaxSelectPicker: Cannot attach ajax without selectpicker being run first!",true)}else if(o.ajaxOptions.ajaxSearchUrl==null){this.log("ajaxSelectPicker: ajaxSearchUrl must be set!",true)}else{var t=0;e.extend(o,u.data().selectpicker);o.$searchbox.off("input");o.$searchbox.on("keydown",function(n){if(i[n.keyCode]){return true}clearTimeout(t);t=setTimeout(function(){var t=u.html();u.find("options").remove();o.destroyLi();o.$menu.append('<div class="menu-loading">loading...</div>');var n={};n.url=o.ajaxOptions.ajaxSearchUrl;n.success=function(e){if(typeof o.ajaxOptions.ajaxResultsPreHook==="function"){e=o.ajaxOptions.ajaxResultsPreHook(e)}if(Array.isArray(e)){var n="",r=e.length;if(e.length){if(typeof o.ajaxOptions.placeHolderOption==="string"){n+='<option data-hidden="true">'+o.ajaxOptions.placeHolderOption+"</option>"}for(var i=0;i<r;i++){var s=e[i];var u=s.hasOwnProperty("data");if(!s.hasOwnProperty("value")&&s.hasOwnProperty("data")&&s.data.hasOwnProperty("divider")){this.log("currentData must have a property of value",true);break}if(u&&s.data.divider){n+=' data-divider="true"></option>';break}n+="<option";if(s.hasOwnProperty("disable")&&s.disable){n+=' disabled="disabled"'}if(s.hasOwnProperty("class")){n+=' class="'+s.class+'"'}if(u){if(s.data.hasOwnProperty("subtext")){n+=' data-subtext="'+s.data.subtext+'"'}if(s.data.hasOwnProperty("icon")){n+=' data-icon="'+s.data.icon+'"'}if(s.data.hasOwnProperty("content")){n+=' data-content="'+s.data.content+'"'}}n+=' value="'+s.value+'">';if(s.hasOwnProperty("text")){n+=s.text+"</option>"}else{n+=s.value+"</option>"}}}o.$element.html(n)}else{o.$element.html(t)}};n.error=function(e){this.log(["ajaxSelectPicker:",e],true);o.$element.html(t)};n.complete=function(){e(".menu-loading").remove();o.refresh()};var r=e.extend(true,{},o.ajaxOptions.ajaxOptions);n.dataType=r.hasOwnProperty("dataType")?r.dataType:"json";n.type=r.hasOwnProperty("type")?r.type:"POST";if(r.hasOwnProperty("data")){r.processedData=r.data;if(typeof r.data==="function"){r.processedData=r.data()}n.data=r.processedData}else{r.data={q:o.$searchbox.val()}}var i=o.$searchbox.val();if(Object.keys(n.data).length){for(var s in n.data){if(n.data.hasOwnProperty(s)){if(n.data[s]==="{{{q}}}"){n.data[s]=i}}}}e.ajax(n)},300)})}};o.log=function(e,n){e=e instanceof Array?e:[e];t.console&&this.ajaxOptions.debug&&(n?console.error:console.log).apply(console,e)};setTimeout(function(){o.init()},500)};e.fn.ajaxSelectPicker=function(t){return this.each(function(){if(e(this).data("ajaxSelectPicker")==undefined){e(this).data("ajaxSelectPicker",new e.ajaxSelectPicker(this,t))}})}}(jQuery,window)